<div class="dnnDevTools-panel dnnDevTools-bgColorDnnBlue">
    <div class="dnnDevTools-checkbox">
        <input type="checkbox" id="dnnDevTools-enableCheckbox">
        <label for="dnnDevTools-enableCheckbox" class="dnnDevTools-copy dnnDevTools-colorWhite">Enable DNN Dev Tools</label>
    </div>
</div>

<div class="dnnDevTools-panel dnnDevTools-bgColorWhite dnnDevTools-marginTop2">
    <h2 class="dnnDevTools-headline">Mail Catch</h2>
    <div class="dnnDevTools-checkbox">
        <input type="checkbox" id="dnnDevTools-enableMailCatchCheckbox">
        <label for="dnnDevTools-enableMailCatchCheckbox" class="dnnDevTools-copy">Enable mail catch</label>
    </div>
    <div class="dnnDevTools-marginTop2">
        <button type="button" id="dnnDevTools-sendMailButton">Send test mail</button>
    </div>
</div>

<div class="dnnDevTools-panel dnnDevTools-bgColorWhite dnnDevTools-marginTop2">
    <h2 class="dnnDevTools-headline">Event catch</h2>
    <div class="dnnDevTools-checkbox">
        <input type="checkbox" id="dnnDevTools-enableDnnEventCatchCheckbox">
        <label for="dnnDevTools-enableDnnEventCatchCheckbox" class="dnnDevTools-copy">Enable event catch</label>
    </div>
</div>

<div class="dnnDevTools-panel dnnDevTools-bgColorWhite dnnDevTools-marginTop2">
    <h2 class="dnnDevTools-headline">Logging</h2>
    <div class="dnnDevTools-checkbox">
        <input type="checkbox" id="dnnDevTools-enableLoggingCheckbox">
        <label for="dnnDevTools-enableLoggingCheckbox" class="dnnDevTools-copy">Enable logging</label>
    </div>
    <div class="dnnDevTools-marginTop2">
        <label for="dnnDevTools-logLevelSelect" class="dnnDevTools-copy dnnDevTools-displayBlock">Select log level</label>
        <select name="" id="dnnDevTools-logLevelSelect" class="dnnDevTools-select dnnDevTools-marginTop1">
            <option value="ALL">all</option>
            <option value="DEBUG">debug</option>
            <option value="INFO">info</option>
            <option value="WARN">warning</option>
            <option value="ERROR">error</option>
            <option value="FATAL">fatal</option>
        </select>
    </div>
</div>

<script>
    (function () {
        var enableCheckbox = document.getElementById('dnnDevTools-enableCheckbox'),
            enableMailCatchCheckbox = document.getElementById('dnnDevTools-enableMailCatchCheckbox'),
            enableDnnEventCatchCheckbox = document.getElementById('dnnDevTools-enableDnnEventCatchCheckbox'),
            enableLoggingCheckbox = document.getElementById('dnnDevTools-enableLoggingCheckbox'),
            logLevelSelect = document.getElementById('dnnDevTools-logLevelSelect'),
            sendMailButton = document.getElementById('dnnDevTools-sendMailButton');

        // set current status
        enableCheckbox.checked = window.weweave.dnnDevTools.enable;
        enableMailCatchCheckbox.checked = window.weweave.dnnDevTools.enableMailCatch;
        enableDnnEventCatchCheckbox.checked = window.weweave.dnnDevTools.enableDnnEventCatch;
        enableLoggingCheckbox.checked = window.weweave.dnnDevTools.logMessageLevel !== 'OFF';

        enableCheckbox.addEventListener('change', function (event) {
            setStatus(enableCheckbox.checked);
        }, false);

        enableMailCatchCheckbox.addEventListener('change', function (event) {
            setMailCatchStatus(enableMailCatchCheckbox.checked);
        }, false);

        sendMailButton.addEventListener('click', function () {
            sendMail();
        }, false);

        enableDnnEventCatchCheckbox.addEventListener('click', function () {
            setEventCatchStatus(enableDnnEventCatchCheckbox.checked);
        }, false);



        enableLoggingCheckbox.addEventListener('click', function () {
            setLoggingStatus(enableLoggingCheckbox.checked);
        }, false);



        logLevelSelect.addEventListener('change', function () {
            setLogLevel(logLevelSelect.value);
        });

        function setStatus(isEnabled) {
            dnnDevTools.ajax('PUT', window.weweave.dnnDevTools.baseUrl + 'api/config/enable?status=' + isEnabled).then(
                function (response) {
                    window.location.reload(false);
                }, function (error) {
                    // TODO show error
                }
            );
        }

        function setMailCatchStatus(isEnabled) {
            dnnDevTools.ajax('PUT', window.weweave.dnnDevTools.baseUrl + 'api/config/enableMailCatch?status=' + isEnabled).then(
                function (response) {
                    console.log(response);
                }, function (error) {
                    // TODO show error
                }
            );
        }

        function setEventCatchStatus(isEnabled) {
            dnnDevTools.ajax('PUT', window.weweave.dnnDevTools.baseUrl + 'api/config/enableDnnEventCatch?status=' + isEnabled).then(
                function (response) {
                    console.log(response);
                }, function (error) {
                    // TODO show error
                }
            );
        }

        function setLoggingStatus(isEnabled) {
            if (isEnabled) {
                setLogLevel(logLevelSelect.value);
            } else {
                setLogLevel('OFF');
            }
        }

        function sendMail() {
            dnnDevTools.ajax('POST', window.weweave.dnnDevTools.baseUrl + 'api/config/sendTestMail').then(
                function (response) {
                    console.log(response);
                }, function (error) {
                    // TODO show error
                }
            );
        }

        function setLogLevel(level) {
            dnnDevTools.ajax('PUT', window.weweave.dnnDevTools.baseUrl + 'api/config/setLogMessageLevel?level=' + level).then(
                function (response) {
                    console.log(response);
                }, function (error) {
                    // TODO show error
                }
            );
        }
    }());
</script>